{"version":3,"sources":["components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/Api.js","utils/constants.js","utils/Auth.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","images/ok.svg","images/error.svg","components/InfoToolTip.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","loggedIn","email","onClick","signOut","to","linkName","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onLikeClick","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","type","src","link","alt","name","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","onCardLike","PopupWithForm","isOpen","onMouseDown","onClickPopup","title","onClose","id","onSubmit","children","titleOfButton","ImagePopup","onPopupClick","api","document","querySelector","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","statusText","token","localStorage","getItem","URL","path","join","href","console","log","fetch","method","_setToken","then","_checkRequest","data","body","JSON","stringify","cardId","auth","password","EditAvatarPopup","inputWithSource","useRef","useEffect","current","value","e","preventDefault","onUpdateAvatar","ref","placeholder","required","EditProfilePopup","useState","setName","description","setDescription","onUpdateUser","minLength","maxLength","onChange","target","AddPlacePopup","place","setPlace","source","setSource","Register","setPassword","setEmail","onRegister","Login","onAuthorization","InfoToolTip","isAuthorization","error","ProtectedRoute","Component","component","App","isEditProfilePopupOpen","setProfilePopupStatus","isAddPlacePopupOpen","setEditPopupStatus","isEditAvatarPopupOpen","setAvatarPopupStatus","isInfoPopupOpen","setInfoPopupStatus","isRequestAuthStatus","setRequestAuthStatus","selectedCard","setSelectedCard","setUser","setLoggedStatus","setCards","navigation","useNavigate","closeAllPopups","handleClickPopup","evt","classList","contains","getInitialCards","reverse","catch","err","getInfoUserOfServ","getContent","checkToken","handleEsc","key","addEventListener","Provider","element","removeItem","likeCard","newCard","state","currentCard","deleteCard","filter","item","authorize","setItem","register","finally","setNewCard","setNewUserInfo","setAvatar","isClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"iOAkBeA,MAff,SAAgBC,GACd,OACE,yBAAQC,UAAU,SAAlB,UACE,qBAAKA,UAAU,iBACbD,EAAME,SAEL,sBAAKD,UAAU,uBAAf,UACD,sBAAMA,UAAU,eAAhB,SAAgCD,EAAMG,QACtC,mBAAGF,UAAU,eAAb,SAA4B,wBAAQG,QAASJ,EAAMK,QAASJ,UAAU,kBAA1C,iDAE3B,cAAC,IAAD,CAAMA,UAAU,eAAeK,GAAIN,EAAMM,GAAzC,SAA8CN,EAAMO,eCN9CC,MAPf,WACE,OACE,wBAAQP,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,wCCFOQ,EAAqBC,IAAMC,gBCCzB,SAASC,EAAT,GAAiE,IAAjDC,EAAgD,EAAhDA,KAAMC,EAA0C,EAA1CA,YAAaC,EAA6B,EAA7BA,YAAaC,EAAgB,EAAhBA,aACvDC,EAAcP,IAAMQ,WAAWT,GAE/BU,EAAQN,EAAKO,MAAMC,MAAQJ,EAAYI,IAGvCC,EAAUT,EAAKU,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAGrDK,EAAuB,6BAAyBJ,GAAW,6BAUjE,OACE,0BAASrB,UAAU,QAAnB,UACGkB,GAAS,wBAAQlB,UAAU,sBAAsB0B,KAAK,SAASvB,QAXpE,WACEY,EAAaH,MAYX,qBACEZ,UAAU,aACV2B,IAAKf,EAAKgB,KACVC,IAAKjB,EAAKkB,KACV3B,QAdN,WACEU,EAAYD,MAeV,sBAAKZ,UAAU,cAAf,UACE,mBAAGA,UAAU,kBAAb,SAAgCY,EAAKkB,OACrC,sBAAK9B,UAAU,oBAAf,UACE,wBAAQA,UAAWyB,EAAyBC,KAAK,SAASvB,QAhBlE,WACEW,EAAYF,MAgBN,sBAAMZ,UAAU,qBAAhB,SAAsCY,EAAKU,MAAMS,kBChC5C,SAASC,EAAKjC,GAC3B,IAAMiB,EAAcP,IAAMQ,WAAWT,GACrC,OACE,uBAAMR,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,qBAAKA,UAAU,kBAAkBG,QAASJ,EAAMkC,aAAhD,SACE,qBAAKjC,UAAU,eAAe6B,IAAI,uCAASF,IAAKX,EAAYkB,WAE9D,sBAAKlC,UAAU,gBAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,iBAAd,SAAgCgB,EAAYc,OAC5C,wBACE9B,UAAU,sBACV0B,KAAK,SACLvB,QAASJ,EAAMoC,mBAGnB,mBAAGnC,UAAU,yBAAb,SAAuCgB,EAAYoB,WAErD,wBACEpC,UAAU,yBACV0B,KAAK,SACLvB,QAASJ,EAAMsC,gBAGnB,yBAASrC,UAAU,SAAnB,SACGD,EAAMuC,MAAMC,KAAI,SAAC3B,GAChB,OACE,cAACD,EAAD,CAAqBC,KAAMA,EAAMC,YAAad,EAAMc,YAAaC,YAAaf,EAAMyC,WAClFzB,aAAchB,EAAMgB,cADXH,EAAKQ,aC/Bb,SAASqB,EAAc1C,GACpC,OACE,yBACEC,UAAS,2BAAsBD,EAAM+B,KAA5B,YAAoC/B,EAAM2C,OAAS,eAAiB,KAE7EC,YAAa5C,EAAM6C,aAHrB,SAKE,sBAAK5C,UAAU,mBAAf,UACE,oBAAIA,UAAU,eAAd,SAA8BD,EAAM8C,QACpC,wBACE7C,UAAS,uDAAkDD,EAAM+B,MACjEJ,KAAK,SACLvB,QAASJ,EAAM+C,UAEjB,uBACEC,GAAG,eACH/C,UAAS,kCAA6BD,EAAM+B,MAC5CA,KAAI,UAAK/B,EAAM+B,KAAX,UACJkB,SAAUjD,EAAMiD,SAJlB,UAMGjD,EAAMkD,SACP,wBAAQjD,UAAU,uBAAuB0B,KAAK,SAA9C,SACG3B,EAAMmD,wBCtBJ,SAASC,EAAT,GAAsD,IAAhCvC,EAA+B,EAA/BA,KAAMkC,EAAyB,EAAzBA,QAASM,EAAgB,EAAhBA,aAClD,OACE,yBACEpD,UAAS,iCAA4BY,EAAO,eAAiB,KAC7DT,QAASiD,EAFX,SAIE,sBAAKpD,UAAU,iBAAf,UACE,qBACEA,UAAU,qBACV6B,IAAKjB,EAAOA,EAAKkB,KAAO,GACxBH,IAAKf,EAAOA,EAAKgB,KAAO,KAE1B,mBAAG5B,UAAU,kBAAb,SAAgCY,EAAOA,EAAKkB,KAAO,KACnD,wBACE9B,UAAU,qDACV0B,KAAK,SACLvB,QAAS2C,S,2CCsEbO,GC5DYC,SAASC,cAAc,2BACxBD,SAASC,cAAc,oCAChBD,SAASC,cAAc,wBAC1BD,SAASC,cAAc,sBACvBD,SAASC,cAAc,6BDwDhC,I,WAnFV,WAAYC,GAAS,oBACnBC,KAAKC,KAAOF,EAAOG,IACnBF,KAAKG,SAAWJ,EAAOK,Q,iDAGzB,SAAcC,GACZ,OAAIA,EAAIC,GACCD,EAAIE,OAEJC,QAAQC,OAAOJ,EAAIK,c,uBAI9B,WACE,IAAMC,EAAQC,aAAaC,QAAQ,SACnC,OAAO,aACH,+BAA4BF,IACzBX,KAAKG,Y,6BAGd,WACE,IAAMD,EAAM,IAAIY,IAAIC,IAAKC,KAAK,SAAUhB,KAAKC,MAAMgB,KAElD,OADDC,QAAQC,IAAIjB,GACJkB,MAAMlB,EAAK,CAChBmB,OAAQ,MACRjB,QAASJ,KAAKsB,cAEfC,KAAKvB,KAAKwB,iB,+BAGb,WACC,IAAMtB,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAAS,MAAOhB,KAAKC,MAAMgB,KACzD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,MACRjB,QAASJ,KAAKsB,cACbC,KAAKvB,KAAKwB,iB,4BAGf,SAAeC,GACb,IAAMvB,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAAS,MAAOhB,KAAKC,MAAMgB,KACzD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,QACRK,KAAMC,KAAKC,UAAU,CAAEvD,KAAMoD,EAAKpD,KAAMM,MAAO8C,EAAK9C,QACpDyB,QAASJ,KAAKsB,cACbC,KAAKvB,KAAKwB,iB,wBAGf,SAAWE,GACT,IAAMxB,EAAM,IAAIY,IAAIC,IAAKC,KAAK,SAAUhB,KAAKC,MAAMgB,KACnD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,OACRK,KAAMC,KAAKC,UAAUF,GACrBtB,QAASJ,KAAKsB,cACbC,KAAKvB,KAAKwB,iB,sBAEf,SAASK,EAAQjE,GACf,IAAMsC,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAASa,EAAQ,SAAU7B,KAAKC,MAAMgB,KACpE,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQzD,EAAU,SAAW,MAC7BwC,QAASJ,KAAKsB,cAEbC,KAAKvB,KAAKwB,iB,uBAEf,SAAU/C,GACR,IAAMyB,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAAS,KAAM,UAAWhB,KAAKC,MAAMgB,KACnE,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,QACRK,KAAMC,KAAKC,UAAUnD,GACrB2B,QAASJ,KAAKsB,cAEbC,KAAKvB,KAAKwB,iB,wBAGf,SAAWK,GACT,IAAM3B,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAASa,GAAS7B,KAAKC,MAAMgB,KAC3D,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,SACRjB,QAASJ,KAAKsB,cACbC,KAAKvB,KAAKwB,mB,KAKL,CC9Ea,CACvBtB,IAAK,gDACLE,QAAS,CACP,eAAgB,uBCiCd0B,EAAO,I,WAzCX,WAAY/B,GAAS,oBACnBC,KAAKC,KAAOF,EAAOG,IACnBF,KAAKG,SAAWJ,EAAOK,Q,iDAEzB,SAAcC,GACZ,OAAIA,EAAIC,GACCD,EAAIE,OAEJC,QAAQC,OAAOJ,EAAIK,c,sBAG9B,YAA+B,IAApBqB,EAAmB,EAAnBA,SAAUtF,EAAS,EAATA,MACbyD,EAAM,IAAIY,IAAIC,IAAKC,KAAK,UAAWhB,KAAKC,MAAMgB,KACpD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,OACRjB,QAASJ,KAAKG,SACduB,KAAMC,KAAKC,UAAU,CAAEG,WAAUtF,YAChC8E,KAAKvB,KAAKwB,iB,uBAGf,YAAgC,IAApBO,EAAmB,EAAnBA,SAAUtF,EAAS,EAATA,MACdyD,EAAM,IAAIY,IAAIC,IAAKC,KAAK,UAAWhB,KAAKC,MAAMgB,KACpD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,OACRjB,QAASJ,KAAKG,SACduB,KAAMC,KAAKC,UAAU,CAAEG,WAAUtF,YAEhC8E,KAAKvB,KAAKwB,iB,wBAEf,SAAWb,GACT,IAAMT,EAAM,IAAIY,IAAIC,IAAKC,KAAK,QAAS,MAAOhB,KAAKC,MAAMgB,KACzD,OAAOG,MAAMlB,EAAK,CAChBmB,OAAQ,MACRjB,QAAQ,2BACHJ,KAAKG,UADH,IAEL,cAAgB,UAAhB,OAA2BQ,OAG9BY,KAAKvB,KAAKwB,mB,KAGF,CD9Be,CAC1BtB,IAAK,gDACLE,QAAS,CACP,eAAgB,sBEfL,SAAS4B,EAAgB1F,GACtC,IAAM2F,EAAkBjF,IAAMkF,SAW9B,OAJAlF,IAAMmF,WAAU,WACdF,EAAgBG,QAAQC,MAAM,KAC7B,CAAC/F,EAAM2C,SAGR,eAACD,EAAD,CACEC,OAAQ3C,EAAM2C,OACdI,QAAS/C,EAAM+C,QACfF,aAAc7C,EAAM6C,aACpBI,SAfJ,SAAsB+C,GACpBA,EAAEC,iBACFjG,EAAMkG,eAAe,CACnB/D,OAAQwD,EAAgBG,QAAQC,SAahChE,KAAK,gBACLe,MAAM,wFACNK,cAAc,yDAPhB,UASE,uBACEgD,IAAKR,EACL1F,UAAU,wCACV8B,KAAK,SACLJ,KAAK,MACLyE,YAAY,uHACZC,UAAQ,IAEV,sBAAMpG,UAAU,oCAAoC+C,GAAG,eAAvD,yHC7BS,SAASsD,EAAiBtG,GAAQ,IAAD,EAEtBU,IAAM6F,SAAS,IAFO,mBAEvCxE,EAFuC,KAEjCyE,EAFiC,OAGR9F,IAAM6F,SAAS,IAHP,mBAGvCE,EAHuC,KAG1BC,EAH0B,KAKxCzF,EAAcP,IAAMQ,WAAWT,GAwBrC,OALAC,IAAMmF,WAAU,WACdW,EAAQvF,EAAYc,MACpB2E,EAAezF,EAAYoB,SAC1B,CAACpB,EAAajB,EAAM2C,SAGrB,eAACD,EAAD,CACEC,OAAQ3C,EAAM2C,OACdI,QAAS/C,EAAM+C,QACfF,aAAc7C,EAAM6C,aACpBI,SApBJ,SAAsB+C,GACpBA,EAAEC,iBACFjG,EAAM2G,aAAa,CACjB5E,OACAM,MAAOoE,KAiBP1E,KAAK,UACLe,MAAM,8FACNK,cAAc,yDAPhB,UASE,uBACElD,UAAU,sCACV8B,KAAK,OACLJ,KAAK,OACLyE,YAAY,8CACZQ,UAAU,IACVC,UAAU,KACVd,MAAOhE,GAAQ,GACf+E,SAxCN,SAA0Bd,GACxBQ,EAAQR,EAAEe,OAAOhB,QAwCbM,UAAQ,IAEV,sBAAMpG,UAAU,eAAe+C,GAAG,aAAlC,mIAGA,uBACE/C,UAAU,+CACV8B,KAAK,QACLJ,KAAK,OACLyE,YAAY,0GACZQ,UAAU,IACVC,UAAU,MACVd,MAAOU,GAAe,GACtBK,SAnDN,SAAiCd,GAC/BU,EAAeV,EAAEe,OAAOhB,QAmDpBM,UAAQ,IAEV,sBAAMpG,UAAU,eAAe+C,GAAG,cAAlC,sICjES,SAASgE,EAAchH,GAAQ,IAAD,EACjBU,IAAM6F,SAAS,IADE,mBACpCU,EADoC,KAC7BC,EAD6B,OAEfxG,IAAM6F,SAAS,IAFA,mBAEpCY,EAFoC,KAE5BC,EAF4B,KAkB3C,OALA1G,IAAMmF,WAAU,WACdqB,EAAS,IACTE,EAAU,MACT,CAACpH,EAAM2C,SAEF,eAACD,EAAD,CACNC,OAAQ3C,EAAM2C,OACdI,QAAS/C,EAAM+C,QACfF,aAAc7C,EAAM6C,aACpBI,SAbF,SAAsB+C,GACpBA,EAAEC,iBACFjG,EAAMsC,WAAW,CAAEP,KAAMkF,EAAOpF,KAAMsF,KAYtCpF,KAAK,QACLe,MAAM,gEACNK,cAAc,yDAPR,UASN,uBACElD,UAAU,uCACV8B,KAAK,QACLJ,KAAK,OACLyE,YAAY,mDACZQ,UAAU,IACVC,UAAU,KACVd,MAAOkB,GAAS,GAChBH,SAhCJ,SAA2Bd,GACzBkB,EAASlB,EAAEe,OAAOhB,QAgChBM,UAAQ,IAEV,sBAAMpG,UAAU,oCAAoC+C,GAAG,cAAvD,mIAGA,uBACE/C,UAAU,sCACV8B,KAAK,OACLJ,KAAK,MACLyE,YAAY,qGACZL,MAAOoB,GAAU,GACjBL,SAzCJ,SAA4Bd,GAC1BoB,EAAUpB,EAAEe,OAAOhB,QAyCjBM,UAAQ,IAEV,sBAAMpG,UAAU,oCAAoC+C,GAAG,aAAvD,yH,WClDW,SAASqE,EAASrH,GAAQ,IAAD,EACNU,IAAM6F,SAAS,IADT,mBAC/Bd,EAD+B,KACrB6B,EADqB,OAEZ5G,IAAM6F,SAAS,IAFH,mBAE/BpG,EAF+B,KAExBoH,EAFwB,KAetC,OACE,0BACEtH,UAAU,gBADZ,UAGE,oBAAIA,UAAU,uBAAd,gFACA,uBACE+C,GAAG,gBACH/C,UAAU,sBACV8B,KAAK,iBACLkB,SAfN,SAAsB+C,GACpBA,EAAEC,iBACFjG,EAAMwH,WACJ,CAAC/B,WAAUtF,WAQX,UAME,uBACEF,UAAU,uBACV8B,KAAK,iBACLJ,KAAK,QACLyE,YAAY,QACZQ,UAAU,IACVC,UAAU,MACVd,MAAO5F,EACP2G,SA5BR,SAA2Bd,GACzBuB,EAASvB,EAAEe,OAAOhB,QA4BZM,UAAQ,IAEV,uBACEpG,UAAU,uBACV8B,KAAK,oBACLJ,KAAK,WACLyE,YAAY,uCACZQ,UAAU,IACVC,UAAU,MACVd,MAAON,EACPqB,SA1CR,SAA8Bd,GAC5BsB,EAAYtB,EAAEe,OAAOhB,QA0CfM,UAAQ,IAEV,wBAAQpG,UAAU,+BAA+B0B,KAAK,SAAtD,0HAGA,cAAC,IAAD,CAAM1B,UAAU,sBAAsBK,GAAG,SAAzC,uKCpDO,SAASmH,EAAMzH,GAAQ,IAAD,EACHU,IAAM6F,SAAS,IADZ,mBAC5Bd,EAD4B,KAClB6B,EADkB,OAET5G,IAAM6F,SAAS,IAFN,mBAE5BpG,EAF4B,KAErBoH,EAFqB,KAiBnC,OACE,0BACEtH,UAAU,gBADZ,UAGE,oBAAIA,UAAU,uBAAd,sCAEA,uBACE+C,GAAG,aACH/C,UAAU,gDACV8B,KAAK,iBACLkB,SAhBN,SAAsB+C,GACpBA,EAAEC,iBACFjG,EAAM0H,gBACJ,CAACjC,WAAUtF,WASX,UAME,uBACEF,UAAU,uBACV8B,KAAK,cACLJ,KAAK,QACLyE,YAAY,QACZQ,UAAU,IACVC,UAAU,MACVd,MAAO5F,EACP2G,SA7BR,SAA2Bd,GACzBuB,EAASvB,EAAEe,OAAOhB,QA6BZM,UAAQ,IAEV,uBACEpG,UAAU,uBACV8B,KAAK,iBACLJ,KAAK,WACLyE,YAAY,uCACZQ,UAAU,IACVC,UAAU,MACVd,MAAON,EACPqB,SA3CR,SAA8Bd,GAC5BsB,EAAYtB,EAAEe,OAAOhB,QA2CfM,UAAQ,IAGV,wBAAQpG,UAAU,+BAA+B0B,KAAK,SAAtD,kDCrDO,UAA0B,+BCA1B,MAA0B,kCCElC,SAASgG,EAAY3H,GAC1B,OACE,yBACEC,UAAS,gBAAWD,EAAM2C,OAAS,eAAiB,KACpDvC,QAASJ,EAAMqD,aAFjB,SAIE,sBAAKpD,UAAU,4CAAf,UACE,qBACEA,UAAU,mBACV2B,IAAK5B,EAAM4H,gBAAkB5D,EAAK6D,EAClC/F,IAAK9B,EAAM4H,gBAAkB,2JAAgC,mGAE/D,mBAAG3H,UAAU,kBAAb,SAAgCD,EAAM4H,gBAAkB,wKACpD,wMAEJ,wBACE3H,UAAU,2DACV0B,KAAK,SACLvB,QAASJ,EAAM+C,e,YCZV+E,MALf,YAA6D,IAAxBC,EAAuB,EAAlCC,UAAyBhI,EAAS,6BAC1D,OACEA,EAAME,SAAW,cAAC6H,EAAD,eAAe/H,IAAY,cAAC,IAAD,CAAUM,GAAG,YC+R9C2H,MAnRf,WAAe,MAE2CvH,IAAM6F,UAAS,GAF1D,mBAEN2B,EAFM,KAEkBC,EAFlB,OAGqCzH,IAAM6F,UAAS,GAHpD,mBAGN6B,EAHM,KAGeC,EAHf,OAIyC3H,IAAM6F,UAAS,GAJxD,mBAIN+B,EAJM,KAIiBC,EAJjB,OAKiC7H,IAAM6F,UAAS,GALhD,mBAKNiC,EALM,KAKWC,EALX,OAMuC/H,IAAM6F,UAAS,GANtD,mBAMNmC,EANM,KAMeC,EANf,OAO2BjI,IAAM6F,SAAS,MAP1C,mBAONqC,EAPM,KAOQC,EAPR,OAQkBnI,IAAM6F,SAAS,CAAExE,KAAM,GAAIM,MAAO,GAAIF,OAAQ,KARhE,mBAQNlB,EARM,KAQO6H,EARP,OASuBpI,IAAM6F,UAAS,GATtC,mBASNrG,EATM,KASI6I,EATJ,OAUarI,IAAM6F,SAAS,IAV5B,mBAUNpG,GAVM,KAUCoH,GAVD,QAWa7G,IAAM6F,SAAS,IAX5B,qBAWNhE,GAXM,MAWCyG,GAXD,MAYPC,GAAaC,cAiInB,SAASC,KACPhB,GAAsB,GACtBE,GAAmB,GACnBE,GAAqB,GACrBE,GAAmB,GACnBE,GAAqB,GACrBE,EAAgB,MAGlB,SAASO,GAAiBC,GACpBA,EAAItC,OAAOuC,UAAUC,SAAS,kBAChCJ,KACAN,EAAgB,OA0DpB,OArMAnI,IAAMmF,WAAU,WAEZvC,EACGkG,kBACAvE,MAAK,SAAClB,GACLiF,GAASjF,EAAIoB,KAAKsE,cAEnBC,OAAM,SAACC,GAAD,OAAS/E,QAAQC,IAAR,uIAAwC8E,SAG3D,IAEHjJ,IAAMmF,WAAU,WAEZvC,EACGsG,oBAEA3E,MAAK,SAAClB,GACL+E,EAAQ/E,EAAIoB,SAGbuE,OAAM,SAACC,GAAD,OAAS/E,QAAQC,IAAR,uIAAwC8E,SAG3D,IAEHjJ,IAAMmF,WAAU,YACd,WACE,IAAMxB,EAAQC,aAAaC,QAAQ,SAC/BF,GACFmB,EAAKqE,WAAWxF,GACbY,MAAK,SAAClB,GACLgF,GAAgB,GAChBxB,GAASxD,EAAIoB,KAAKhF,UAEnBuJ,OAAM,SAAAC,GACL/E,QAAQC,IAAR,oKAAiD8E,OAIzDG,KACC,IAEHpJ,IAAMmF,WAAU,YACG,IAAb3F,GACF+I,GAAW,OAEd,CAAC/I,EAAU+I,KA+FZvI,IAAMmF,WAAU,WACd,GACEqC,GACAE,GACAE,GACAE,EACA,CACA,SAASuB,EAAUV,GACD,WAAZA,EAAIW,MACNX,EAAIpD,iBACJkD,MAIJ,OADA5F,SAAS0G,iBAAiB,UAAWF,GAC9B,WACLxG,SAAS0G,iBAAiB,UAAWF,OAGxC,CAAC7B,EAAwBE,EAAqBE,EAAuBE,IAsCtE,cAAC/H,EAAmByJ,SAApB,CAA6BnE,MAAO9E,EAApC,SACE,sBAAKhB,UAAU,OAAf,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOwE,KAAK,IAAI0F,QACd,qCACE,cAAC,EAAD,CAAQjK,SAAUA,EAAUC,MAAOA,GAAOE,QAdtD,WACEiE,aAAa8F,WAAW,SACxB5E,EAAKqE,WAAW,IACbH,OAAM,SAACC,GACNZ,GAAgB,GAChBE,GAAW,cASuD1I,SAAS,iCAAQD,GAAG,WAChF,cAAC,EAAD,CACAJ,SAAUA,EACV8H,UAAW/F,EACTG,cAzFd,WACE+F,GAAsB,IAyFV7F,WAvFd,WACE+F,GAAmB,IAuFPnG,aArFd,WACEqG,GAAqB,IAqFTzH,YA/Fd,SAAyBD,GACvBgI,EAAgBhI,IA+FJ0B,MAAOA,GACPE,WAlDd,SAAwB5B,GAEtB,IAAMS,EAAUT,EAAKU,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAG3DiC,EACG+G,SAASxJ,EAAKQ,IAAKC,GACT2D,MAAK,SAACqF,GAELtB,IAAS,SAAAuB,GAAK,OAAIA,EAAM/H,KAAI,SAAAgI,GAAW,OACrCA,EAAYnJ,MAAQR,EAAKQ,IAAMiJ,EAAQnF,KAAOqF,WAG3Dd,OAAM,SAACC,GACN/E,QAAQC,IAAR,uIAAwC8E,QAqChC3I,aAjCd,SAA0BH,GACxByC,EACGmH,WAAW5J,EAAKQ,KAChB4D,KAAK+D,GAASzG,GAAMmI,QAAO,SAAAC,GAAI,QAAMA,EAAKtJ,MAAQR,EAAKQ,UACvDqI,OAAM,SAACC,GACN/E,QAAQC,IAAR,uIAAwC8E,UA8BlC,cAAC,EAAD,SAIJ,cAAC,IAAD,CAAOlF,KAAK,SAAS0F,QACnB,qCACE,cAAC,EAAD,CAAQjK,SAAUA,EAAUK,SAAS,qEAAcD,GAAG,cACtD,cAACmH,EAAD,CAAOC,gBA/JnB,SAA+BvC,GAC7BK,EAAKoF,UAAUzF,GACZF,MAAK,SAAClB,GACLO,aAAauG,QAAQ,QAAS9G,EAAIM,OAClC0E,GAAgB,GAChBxB,GAASpC,EAAKhF,OACdwI,GAAqB,GACrBM,GAAW,QAEZS,OAAM,SAACC,GACNhB,GAAqB,GACrBF,GAAmB,cAwJjB,cAAC,IAAD,CAAOhE,KAAK,YAAY0F,QACtB,qCACE,cAAC,EAAD,CAAQjK,SAAUA,EAAUK,SAAS,iCAAQD,GAAG,WAChD,cAAC+G,EAAD,CAAUG,WApLtB,SAAkCrC,GAChCK,EAAKsF,SAAS3F,GACXF,MAAK,SAAClB,GACLkF,GAAW,UACXN,GAAqB,MAEtBe,OAAM,SAACC,GACNhB,GAAqB,MAEtBoC,SAAQ,WACPtC,GAAmB,cA6KjB,cAAC,IAAD,CAAOhE,KAAK,IAAI0F,QAAS,cAAC,IAAD,CAAU7J,GAAG,WAExC,cAACqH,EAAD,CAAahF,OAAQ6F,EAAiBZ,gBAAiBc,EAAqBrF,aAAc+F,GAAkBrG,QAASoG,KAErH,cAAC/F,EAAD,CACEvC,KAAM+H,EACN7F,QAASoG,GACT9F,aAAc+F,KAEhB,cAACpC,EAAD,CAAerE,OAAQyF,EACrBrF,QAASoG,GACTtG,aAAcuG,GACd9G,WA9IR,SAA8BgI,GAC5BhH,EACG0H,WAAWV,GACXrF,MAAK,SAACqF,GACLtB,GAAS,CAACsB,EAAQnF,MAAV,mBAAmB5C,MAC3B4G,QAEDO,OAAM,SAACC,GACN/E,QAAQC,IAAR,uIAAwC8E,UAuIxC,cAACrD,EAAD,CAAkB3D,OAAQuF,EAAwBnF,QAASoG,GAAgBtG,aAAcuG,GACvFzC,aAzKR,SAA0BxB,GAEtB7B,EACG2H,eAAe9F,GACfF,MAAK,SAAClB,GACL+E,EAAQ/E,EAAIoB,MACZgE,QAEDO,OAAM,SAACC,GAAD,OAAS/E,QAAQC,IAAR,uIAAwC8E,UAkKxD,cAACjE,EAAD,CAAiB/C,OAAQ2F,EAAuBvF,QAASoG,GAAgBtG,aAAcuG,GACrFlD,eA9JR,SAA4B/D,GAC1BmB,EACG4H,UAAU/I,GACV8C,MAAK,SAAC9C,GACL2G,EAAQ3G,EAAOgD,MACfgE,QAGDO,OAAM,SAACC,GACN/E,QAAQC,IAAR,uIAAwC8E,UAsJxC,cAACjH,EAAD,CACEyI,QAAShC,GACTtG,aAAcuG,GACdrH,KAAK,cACLe,MAAM,2DACNK,cAAc,uBCjRTiI,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBrG,MAAK,YAAkD,IAA/CsG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACK,cAAC,IAAD,UACD,cAAC,EAAD,QAGJvI,SAASwI,eAAe,SAM1BX,M","file":"static/js/main.127d9bc7.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n      {(props.loggedIn) ?\r\n   \r\n        (<div className='header__text-wrapper'>\r\n        <span className='header__mail'>{props.email}</span>\r\n        <p className=\"header__text\"><button onClick={props.signOut} className='header__button '>Выйти</button></p>\r\n        </div>) :\r\n        (<Link className=\"header__text\" to={props.to}>{props.linkName}</Link>)\r\n      }\r\n    </header>\r\n  );\r\n}\r\nexport default Header;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copiright\">© 2022. Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\nexport default Footer;\r\n","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default function Card({ card, onCardClick, onLikeClick, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext); //монтируем глобальный стэйт\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = `place__like-button ${isLiked && 'place__like-button_active'}`;\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n  function handleLikeClick() {\r\n    onLikeClick(card);\r\n  }\r\n  return (\r\n    <article className=\"place\">\r\n      {isOwn && <button className=\"place__trash-button\" type=\"button\" onClick={handleDeleteClick}></button>}\r\n\r\n      <img\r\n        className=\"place__img\"\r\n        src={card.link}\r\n        alt={card.name}\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"place__name\">\r\n        <p className=\"place__paragraf\">{card.name}</p>\r\n        <div className=\"place__like-group\">\r\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n          <span className=\"place__like-amount\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default function Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__img\" alt=\"аватар\" src={currentUser.avatar} />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__name\">\r\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n            <button\r\n              className=\"profile__open-popup\"\r\n              type=\"button\"\r\n              onClick={props.onEditProfile}\r\n            ></button>\r\n          </div>\r\n          <p className=\"profile__specification\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          className=\"profile__adding-button\"\r\n          type=\"button\"\r\n          onClick={props.onAddPlace}\r\n        ></button>\r\n      </section>\r\n      <section className=\"places\">\r\n        {props.cards.map((card) => {\r\n          return (\r\n            <Card key={card._id} card={card} onCardClick={props.onCardClick} onLikeClick={props.onCardLike}\r\n              onCardDelete={props.onCardDelete} />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","export default function PopupWithForm(props) {\r\n  return (\r\n    <section\r\n      className={`popup popup_type_${props.name} ${props.isOpen ? \"popup_opened\" : \" \"\r\n        }`}\r\n      onMouseDown={props.onClickPopup}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <button\r\n          className={`popup__reset-button popup__reset-button_type_${props.name}`}\r\n          type=\"button\"\r\n          onClick={props.onClose}\r\n        ></button>\r\n        <form\r\n          id=\"profile-form\"\r\n          className={`popup__form popup__form_${props.name}`}\r\n          name={`${props.name}__form`}\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button className=\"popup__submit-button\" type=\"submit\">\r\n            {props.titleOfButton}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","export default function ImagePopup({ card, onClose, onPopupClick }) {\r\n  return (\r\n    <section\r\n      className={`popup popup_type_image ${card ? \"popup_opened\" : \" \"}`}\r\n      onClick={onPopupClick}\r\n    >\r\n      <div className=\"popup__content\">\r\n        <img\r\n          className=\"popup__large-image\"\r\n          alt={card ? card.name : \"\"}\r\n          src={card ? card.link : \"\"}\r\n        />\r\n        <p className=\"popup__subtitle\">{card ? card.name : \"\"}</p>\r\n        <button\r\n          className=\"popup__reset-button popup__reset-button_type_image\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import path from 'path';\nimport {configConnection} from \"./constants\";\nclass Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _checkRequest(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.statusText);\n    }\n  }\n\n  _setToken() {\n    const token = localStorage.getItem(\"token\");\n    return {\n        \"Authorization\" : `Bearer ${token}`,\n        ...this._headers\n    }\n}\n  getInitialCards() {\n    const url = new URL(path.join('cards'), this._url).href;\n    console.log(url);\n     return fetch(url, {\n       method: \"GET\",\n       headers: this._setToken(),\n     })\n     .then(this._checkRequest);\n   }\n\n   getInfoUserOfServ() {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: \"GET\",\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n\n  setNewUserInfo(data) {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: \"PATCH\",\n      body: JSON.stringify({ name: data.name, about: data.about }),\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n\n  setNewCard(body) {\n    const url = new URL(path.join('cards'), this._url).href;\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(body),\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n  likeCard(cardId, isLiked) {\n    const url = new URL(path.join('cards', cardId, 'likes'), this._url).href;\n    return fetch(url, {\n      method: isLiked ? \"DELETE\" : \"PUT\",\n      headers: this._setToken(),\n    })\n      .then(this._checkRequest);\n  }\n  setAvatar(avatar) {\n    const url = new URL(path.join('users', 'me', 'avatar'), this._url).href;\n    return fetch(url, {\n      method: \"PATCH\",\n      body: JSON.stringify(avatar),\n      headers: this._setToken(),\n    })\n      .then(this._checkRequest)\n\n  }\n  deleteCard(cardId) {\n    const url = new URL(path.join('cards', cardId), this._url).href;\n    return fetch(url, {\n      method: \"DELETE\",\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n \n}\n\nconst api = new Api(configConnection);\nexport { api };\n\n","const config = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__submit-button',\n  inactiveButtonClass: 'popup__submit-button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n}\nconst configConnection = {\n  url: 'http://project-mesto.nomoredomains.work:3000/',\n  headers: {\n    'Content-Type': 'application/json',\n  }\n}\nconst authConfigConnection ={\n  url: 'http://project-mesto.nomoredomains.work:3000/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n}\nconst cardsTemplateSelector = 'place-card';\nconst containerSelector = '.places';\nconst closeButtonSelector = '.popup__reset-button';\nconst openedPopupSelector ='popup_opened';\nconst largeImageSelector= '.popup__large-image';\nconst popupSumtitleSelector ='.popup__subtitle';\nconst inputName = document.querySelector('.popup__input_type_name');\nconst inputGob = document.querySelector('.popup__input_type_specification');\nconst formEditProfile = document.querySelector('.popup__form_profile');\nconst formNewPlace = document.querySelector('.popup__form_place');\nconst formEditAvatar=document.querySelector('.popup_type_change-avatar')\n\nexport { config, configConnection,authConfigConnection, cardsTemplateSelector, containerSelector, largeImageSelector, popupSumtitleSelector,\n  closeButtonSelector, openedPopupSelector, inputName, inputGob, formEditProfile, formNewPlace, formEditAvatar};","import path from 'path';\nimport { authConfigConnection } from \"./constants\";\nclass Auth {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n  _checkRequest(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.statusText);\n    }\n  }\n  register({ password, email }) {\n    const url = new URL(path.join('signup'), this._url).href;\n    return fetch(url, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email })\n    }).then(this._checkRequest);\n  } ;\n\n  authorize({ password, email }) {\n    const url = new URL(path.join('signin'), this._url).href;\n    return fetch(url, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkRequest)\n }\n  getContent(token) {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: 'GET',\n      headers: {\n        ...this._headers,\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n    .then(this._checkRequest)\n  }\n}\nconst auth = new Auth(authConfigConnection);\nexport { auth };","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nexport default function EditAvatarPopup(props) {\r\n  const inputWithSource = React.useRef(); // записываем объект, возвращаемый хуком, в переменную\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: inputWithSource.current.value,\r\n    });\r\n  }\r\n  React.useEffect(() => {\r\n    inputWithSource.current.value=''\r\n  }, [props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onClickPopup={props.onClickPopup}\r\n      onSubmit={handleSubmit}\r\n      name=\"change-avatar\"\r\n      title=\"Обновить аватар\"\r\n      titleOfButton=\"Сохранить\"\r\n    >\r\n      <input\r\n        ref={inputWithSource}  \r\n        className=\"popup__input popup__input_type_avatar\"\r\n        name=\"avatar\"\r\n        type=\"url\"\r\n        placeholder=\"Введите адрес аватара\"\r\n        required\r\n      />\r\n      <span className=\"popup__error popup__error_visible\" id=\"avatar-error\">\r\n        Введите адрес сайта\r\n      </span>\r\n    </PopupWithForm>)\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nexport default function EditProfilePopup(props) {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  //подписка на контекст\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    })\r\n  }\r\n\r\n  // После загрузки текущего пользователя из API\r\n  // его данные будут использованы в управляемых компонентах.\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onClickPopup={props.onClickPopup}\r\n      onSubmit={handleSubmit}\r\n      name=\"profile\"\r\n      title=\"Обновить профиль\"\r\n      titleOfButton=\"Сохранить\"\r\n    >\r\n      <input\r\n        className=\"popup__input popup__input_type_name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Ваше имя\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        value={name || ''}\r\n        onChange={handleChangeName}\r\n        required\r\n      />\r\n      <span className=\"popup__error\" id=\"name-error\">\r\n        Вы пропустили это поле\r\n      </span>\r\n      <input\r\n        className=\"popup__input popup__input_type_specification\"\r\n        name=\"about\"\r\n        type=\"text\"\r\n        placeholder=\"Ваша специальность\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        value={description || ''}\r\n        onChange={handleChangeDescription}\r\n        required\r\n      />\r\n      <span className=\"popup__error\" id=\"about-error\">\r\n        Вы пропустили это поле\r\n      </span>\r\n    </PopupWithForm>\r\n  )\r\n}","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nexport default function AddPlacePopup(props) {\r\n  const [place, setPlace] = React.useState('');\r\n  const [source, setSource] = React.useState('');\r\n  function handleChangePlace(e) {\r\n    setPlace(e.target.value);\r\n  }\r\n  function handleChangeSource(e) {\r\n    setSource(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlace({ name: place, link: source })\r\n  }\r\n  React.useEffect(() => {\r\n    setPlace('');\r\n    setSource('');\r\n  }, [props.isOpen]);\r\n\r\n  return (<PopupWithForm\r\n    isOpen={props.isOpen}\r\n    onClose={props.onClose}\r\n    onClickPopup={props.onClickPopup}\r\n    onSubmit={handleSubmit}\r\n    name=\"place\"\r\n    title=\"Новое место\"\r\n    titleOfButton=\"Сохранить\"\r\n  >\r\n    <input\r\n      className=\"popup__input popup__input_type_place\"\r\n      name=\"place\"\r\n      type=\"text\"\r\n      placeholder=\"Название\"\r\n      minLength=\"2\"\r\n      maxLength=\"30\"\r\n      value={place || ''}\r\n      onChange={handleChangePlace}\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_visible\" id=\"place-error\">\r\n      Вы пропустили это поле\r\n    </span>\r\n    <input\r\n      className=\"popup__input popup__input_type_link\"\r\n      name=\"link\"\r\n      type=\"url\"\r\n      placeholder=\"Ссылка на картинку\"\r\n      value={source || ''}\r\n      onChange={handleChangeSource}\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_visible\" id=\"link-error\">\r\n      Введите адрес сайта\r\n    </span>\r\n  </PopupWithForm>)\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default function Register(props) {\r\n  const [password, setPassword] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n  function handleChangePassword(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n  function handleChangeEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onRegister(\r\n      {password, email}\r\n    )\r\n  }\r\n  return (\r\n    <section\r\n      className='authorization'\r\n    >\r\n      <h2 className=\"authorization__title\">Регистрация</h2>\r\n      <form\r\n        id=\"register-form\"\r\n        className='authorization__form'\r\n        name='register__form'\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"authorization__input\"\r\n          name=\"register-email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={email}\r\n          onChange={handleChangeEmail}\r\n          required\r\n        />\r\n        <input\r\n          className=\"authorization__input\"\r\n          name=\"register-password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={password}\r\n          onChange={handleChangePassword}\r\n          required\r\n        />\r\n        <button className=\"authorization__submit-button\" type=\"submit\">\r\n          Зарегистрироваться\r\n        </button>\r\n        <Link className=\"authorization__link\" to=\"/login\">\r\n          Уже зарегистрированы? Войти\r\n        </Link>\r\n      </form>\r\n    </section>\r\n  )\r\n}","import React from \"react\";\r\nexport default function Login(props) {\r\n  const [password, setPassword] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n\r\n\r\n  function handleChangePassword(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n  function handleChangeEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAuthorization(\r\n      {password, email }\r\n    )\r\n  }\r\n  return (\r\n    <section\r\n      className='authorization'\r\n    >\r\n      <h2 className=\"authorization__title\">Вход</h2>\r\n\r\n      <form\r\n        id=\"login-form\"\r\n        className='authorization__form authorization__form_login'\r\n        name='register__form'\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"authorization__input\"\r\n          name=\"login-email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={email}\r\n          onChange={handleChangeEmail}\r\n          required\r\n        />\r\n        <input\r\n          className=\"authorization__input\"\r\n          name=\"login-password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={password}\r\n          onChange={handleChangePassword}\r\n          required\r\n        />\r\n\r\n        <button className=\"authorization__submit-button\" type=\"submit\">\r\n          Войти\r\n        </button>\r\n\r\n      </form>\r\n\r\n    </section>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/ok.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/error.d4ce2a26.svg\";","import ok from \"../images/ok.svg\";\r\nimport error from \"../images/error.svg\";\r\nexport function InfoToolTip(props){\r\n  return (\r\n    <section\r\n      className={`popup ${props.isOpen ? \"popup_opened\" : \" \"}`}\r\n      onClick={props.onPopupClick}\r\n    >\r\n      <div className=\"popup__content popup__content_infoToolTip\">\r\n        <img\r\n          className=\"popup__infoImage\"\r\n          src={props.isAuthorization ? ok : error}\r\n          alt={props.isAuthorization ? 'Вы успешно авторизировались' : 'Что-то пошло не так'}\r\n        />\r\n        <p className=\"popup__infoText\">{props.isAuthorization ? \"Вы успешно зарегистрировались!\"\r\n          : \"Что-то пошло не так! Попробуйте ещё раз.\"}\r\n        </p>\r\n        <button\r\n          className=\"popup__reset-button popup__reset-button_type_infoToolTip\"\r\n          type=\"button\"\r\n          onClick={props.onClose}\r\n        ></button>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    props.loggedIn ? <Component {...props} /> : <Navigate to=\"/login\" />\r\n  );\r\n};\r\nexport default ProtectedRoute;\r\n","import Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Main from \"./Main\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport React from \"react\";\r\nimport { api } from '../utils/Api';\r\nimport { auth } from \"../utils/Auth\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport {  Route, Routes,  useNavigate, Navigate } from 'react-router-dom';\r\nimport Register from \"./Register\";\r\nimport Login from \"./Login\";\r\nimport {InfoToolTip} from \"./InfoToolTip\"\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nfunction App() {\r\n  //переменные состояния видимости попапов\r\n  const [isEditProfilePopupOpen, setProfilePopupStatus] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setEditPopupStatus] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setAvatarPopupStatus] = React.useState(false);\r\n  const [isInfoPopupOpen, setInfoPopupStatus] = React.useState(false);\r\n  const [isRequestAuthStatus, setRequestAuthStatus] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setUser] = React.useState({ name: '', about: '', avatar: '' });\r\n  const [loggedIn, setLoggedStatus] = React.useState(false)\r\n  const [email, setEmail] = React.useState('')\r\n  const [cards, setCards] = React.useState([]);\r\n  const navigation = useNavigate();\r\n  \r\n  React.useEffect(() => {\r\n    function getInitialCards() {\r\n      api\r\n        .getInitialCards()\r\n        .then((res) => {\r\n          setCards(res.data.reverse());\r\n        })\r\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\r\n    }\r\n    getInitialCards();\r\n  }, []);\r\n  \r\n  React.useEffect(() => {\r\n    function getInfoUser() {\r\n      api\r\n        .getInfoUserOfServ()\r\n        \r\n        .then((res) => {\r\n          setUser(res.data);\r\n        })\r\n\r\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\r\n    }\r\n    getInfoUser();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    function checkToken() {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        auth.getContent(token)\r\n          .then((res) => {\r\n            setLoggedStatus(true);\r\n            setEmail(res.data.email);\r\n          })\r\n          .catch(err => {\r\n            console.log(`Упс. Что-то пошло не так. Ошибка: ${err}`);\r\n          });\r\n      }\r\n    }\r\n    checkToken();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (loggedIn === true) {\r\n      navigation('/')\r\n    }\r\n}, [loggedIn, navigation])\r\n\r\n  function handleRegisterFormSubmit(data) {\r\n    auth.register(data)\r\n      .then((res) => {\r\n        navigation('/login')\r\n        setRequestAuthStatus(true)\r\n      })\r\n      .catch((err) => {\r\n        setRequestAuthStatus(false)\r\n      })\r\n      .finally(() => {\r\n        setInfoPopupStatus(true)\r\n      })\r\n  }\r\n\r\n  function handleOnAuthorization(data) {\r\n    auth.authorize(data)\r\n      .then((res) => {\r\n        localStorage.setItem('token', res.token)\r\n        setLoggedStatus(true)\r\n        setEmail(data.email)\r\n        setRequestAuthStatus(true)\r\n        navigation('/')\r\n      })\r\n      .catch((err) => {\r\n        setRequestAuthStatus(false)\r\n        setInfoPopupStatus(true)\r\n      })\r\n  }\r\n  function handleUpdateUser(data) {\r\n    function setInfoUser() {\r\n      api\r\n        .setNewUserInfo(data)\r\n        .then((res) => {\r\n          setUser(res.data);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\r\n    }\r\n    setInfoUser();\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api\r\n      .setAvatar(avatar)\r\n      .then((avatar) => {\r\n        setUser(avatar.data);\r\n        closeAllPopups()\r\n      }\r\n      )\r\n      .catch((err) => {\r\n        console.log(`Ошибка связи с сервером: ${err}`);\r\n      })\r\n  }\r\n  function handleAddPlaceSubmit(newCard) {\r\n    api\r\n      .setNewCard(newCard)\r\n      .then((newCard) => {\r\n        setCards([newCard.data, ...cards]);\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка связи с сервером: ${err}`);\r\n      })\r\n  }\r\n\r\n  //объявляем функции обновления переменных состояния\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n  function handleEditProfileClick() {\r\n    setProfilePopupStatus(true);\r\n  }\r\n  function handleAddPlaceClick() {\r\n    setEditPopupStatus(true);\r\n  }\r\n  function handleEditAvatarClick() {\r\n    setAvatarPopupStatus(true);\r\n  }\r\n  function closeAllPopups() {\r\n    setProfilePopupStatus(false);\r\n    setEditPopupStatus(false);\r\n    setAvatarPopupStatus(false);\r\n    setInfoPopupStatus(false);\r\n    setRequestAuthStatus(false);\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  function handleClickPopup(evt) {\r\n    if (evt.target.classList.contains(\"popup_opened\")) {\r\n      closeAllPopups();\r\n      setSelectedCard(null);\r\n    }\r\n  }\r\n  React.useEffect(() => {\r\n    if (\r\n      isEditProfilePopupOpen ||\r\n      isAddPlacePopupOpen ||\r\n      isEditAvatarPopupOpen ||\r\n      isInfoPopupOpen\r\n    ) {\r\n      function handleEsc(evt) {\r\n        if (evt.key === \"Escape\") {\r\n          evt.preventDefault();\r\n          closeAllPopups();\r\n        }\r\n      }\r\n      document.addEventListener(\"keydown\", handleEsc);\r\n      return () => {\r\n        document.addEventListener(\"keydown\", handleEsc);\r\n      };\r\n    }\r\n  }, [isEditProfilePopupOpen, isAddPlacePopupOpen, isEditAvatarPopupOpen, isInfoPopupOpen]);\r\n\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api\r\n      .likeCard(card._id, isLiked)\r\n                .then((newCard) => {\r\n            \r\n                  setCards(state => state.map(currentCard =>\r\n                    currentCard._id === card._id ? newCard.data : currentCard\r\n                  ));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка связи с сервером: ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(setCards(cards.filter(item => !(item._id === card._id))))\r\n      .catch((err) => {\r\n        console.log(`Ошибка связи с сервером: ${err}`);\r\n      })\r\n  }\r\n\r\n  function signOut() {\r\n    localStorage.removeItem('token');\r\n    auth.getContent('')\r\n      .catch((err) => {    //убеждаемся, что сервер нас не может авторизовать\r\n        setLoggedStatus(false);\r\n        navigation('/login');\r\n      })\r\n  }\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Routes>\r\n          <Route path=\"/\" element={\r\n            <>\r\n              <Header loggedIn={loggedIn} email={email} signOut={signOut} linkName='Выйти' to=\"/login\" />\r\n              <ProtectedRoute\r\n              loggedIn={loggedIn}\r\n              component={Main}\r\n                onEditProfile={handleEditProfileClick}\r\n                onAddPlace={handleAddPlaceClick}\r\n                onEditAvatar={handleEditAvatarClick}\r\n                onCardClick={handleCardClick}\r\n                cards={cards}\r\n                onCardLike={handleCardLike}\r\n                onCardDelete={handleCardDelete}\r\n              />\r\n              <Footer />\r\n            </>\r\n          } />\r\n\r\n          <Route path=\"/login\" element={\r\n            <>\r\n              <Header loggedIn={loggedIn} linkName='Регистрация' to='/register' />\r\n              <Login onAuthorization={handleOnAuthorization} />\r\n            </>\r\n          } />\r\n\r\n          <Route path=\"/register\" element={\r\n            <>\r\n              <Header loggedIn={loggedIn} linkName='Войти' to='/login' />\r\n              <Register onRegister={handleRegisterFormSubmit} />\r\n            </>\r\n          } />\r\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n        </Routes>\r\n        <InfoToolTip isOpen={isInfoPopupOpen} isAuthorization={isRequestAuthStatus} onPopupClick={handleClickPopup} onClose={closeAllPopups}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n          onPopupClick={handleClickPopup}\r\n        />\r\n        <AddPlacePopup isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onClickPopup={handleClickPopup}\r\n          onAddPlace={handleAddPlaceSubmit} />\r\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onClickPopup={handleClickPopup}\r\n          onUpdateUser={handleUpdateUser} />\r\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onClickPopup={handleClickPopup}\r\n          onUpdateAvatar={handleUpdateAvatar} />\r\n        <PopupWithForm\r\n          isClose={closeAllPopups}\r\n          onClickPopup={handleClickPopup}\r\n          name=\"delete-card\"\r\n          title=\"Вы уверены?\"\r\n          titleOfButton=\"Да\"\r\n        ></PopupWithForm>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n       <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}