{"version":3,"sources":["components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/Api.js","utils/constants.js","utils/Auth.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","images/ok.svg","images/error.svg","components/InfoToolTip.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","loggedIn","email","onClick","signOut","to","linkName","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onLikeClick","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","type","src","link","alt","name","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","onCardLike","PopupWithForm","isOpen","onMouseDown","onClickPopup","title","onClose","id","onSubmit","children","titleOfButton","ImagePopup","onPopupClick","api","document","querySelector","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","statusText","token","localStorage","getItem","URL","path","join","href","fetch","method","_setToken","then","_checkRequest","data","body","JSON","stringify","cardId","auth","password","EditAvatarPopup","inputWithSource","useRef","useEffect","current","value","e","preventDefault","onUpdateAvatar","ref","placeholder","required","EditProfilePopup","useState","setName","description","setDescription","onUpdateUser","minLength","maxLength","onChange","target","AddPlacePopup","place","setPlace","source","setSource","Register","setPassword","setEmail","onRegister","Login","onAuthorization","InfoToolTip","isAuthorization","error","ProtectedRoute","Component","component","App","isEditProfilePopupOpen","setProfilePopupStatus","isAddPlacePopupOpen","setEditPopupStatus","isEditAvatarPopupOpen","setAvatarPopupStatus","isInfoPopupOpen","setInfoPopupStatus","isRequestAuthStatus","setRequestAuthStatus","selectedCard","setSelectedCard","setUser","setLoggedStatus","setCards","navigation","useNavigate","closeAllPopups","handleClickPopup","evt","classList","contains","getContent","catch","err","console","log","checkToken","getInitialCards","reverse","getInfoUserOfServ","handleEsc","key","addEventListener","Provider","element","removeItem","likeCard","newCard","state","currentCard","deleteCard","filter","item","authorize","setItem","register","finally","setNewCard","setNewUserInfo","setAvatar","isClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.8a5c1373.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from \"react-router-dom\";\n\nfunction Header(props) {\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n      {(props.loggedIn) ?\n   \n        (<div className='header__text-wrapper'>\n        <span className='header__mail'>{props.email}</span>\n        <p className=\"header__text\"><button onClick={props.signOut} className='header__button '>Выйти</button></p>\n        </div>) :\n        (<Link className=\"header__text\" to={props.to}>{props.linkName}</Link>)\n      }\n    </header>\n  );\n}\nexport default Header;\n","function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copiright\">© 2022. Mesto Russia</p>\n    </footer>\n  );\n}\nexport default Footer;\n","import React from \"react\";\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nexport default function Card({ card, onCardClick, onLikeClick, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext); //монтируем глобальный стэйт\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner === currentUser._id;\n \n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some(i => i === currentUser._id);\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n  function handleClick() {\n    onCardClick(card);\n  }\n  function handleLikeClick() {\n    onLikeClick(card);\n  }\n  return (\n    <article className=\"place\">\n      {isOwn && <button className=\"place__trash-button\" type=\"button\" onClick={handleDeleteClick}></button>}\n\n      <img\n        className=\"place__img\"\n        src={card.link}\n        alt={card.name}\n        onClick={handleClick}\n      />\n      <div className=\"place__name\">\n        <p className=\"place__paragraf\">{card.name}</p>\n        <div className=\"place__like-group\">\n          <button className={`place__like-button ${isLiked? 'place__like-button_active' : ''}`} type=\"button\" onClick={handleLikeClick}></button>\n          <span className=\"place__like-amount\">{card.likes.length}</span>\n        </div>\n      </div>\n    </article>\n  );\n}\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nexport default function Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\" onClick={props.onEditAvatar}>\n          <img className=\"profile__img\" alt=\"аватар\" src={currentUser.avatar} />\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__name\">\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\n            <button\n              className=\"profile__open-popup\"\n              type=\"button\"\n              onClick={props.onEditProfile}\n            ></button>\n          </div>\n          <p className=\"profile__specification\">{currentUser.about}</p>\n        </div>\n        <button\n          className=\"profile__adding-button\"\n          type=\"button\"\n          onClick={props.onAddPlace}\n        ></button>\n      </section>\n      <section className=\"places\">\n        {props.cards.map((card) => {\n          return (\n            <Card key={card._id} card={card} onCardClick={props.onCardClick} onLikeClick={props.onCardLike}\n              onCardDelete={props.onCardDelete} />\n          );\n        })}\n      </section>\n    </main>\n  );\n}\n","export default function PopupWithForm(props) {\n  return (\n    <section\n      className={`popup popup_type_${props.name} ${props.isOpen ? \"popup_opened\" : \" \"\n        }`}\n      onMouseDown={props.onClickPopup}\n    >\n      <div className=\"popup__container\">\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <button\n          className={`popup__reset-button popup__reset-button_type_${props.name}`}\n          type=\"button\"\n          onClick={props.onClose}\n        ></button>\n        <form\n          id=\"profile-form\"\n          className={`popup__form popup__form_${props.name}`}\n          name={`${props.name}__form`}\n          onSubmit={props.onSubmit}\n        >\n          {props.children}\n          <button className=\"popup__submit-button\" type=\"submit\">\n            {props.titleOfButton}\n          </button>\n        </form>\n      </div>\n    </section>\n  );\n}\n","export default function ImagePopup({ card, onClose, onPopupClick }) {\n  return (\n    <section\n      className={`popup popup_type_image ${card ? \"popup_opened\" : \" \"}`}\n      onClick={onPopupClick}\n    >\n      <div className=\"popup__content\">\n        <img\n          className=\"popup__large-image\"\n          alt={card ? card.name : \"\"}\n          src={card ? card.link : \"\"}\n        />\n        <p className=\"popup__subtitle\">{card ? card.name : \"\"}</p>\n        <button\n          className=\"popup__reset-button popup__reset-button_type_image\"\n          type=\"button\"\n          onClick={onClose}\n        ></button>\n      </div>\n    </section>\n  );\n}\n","import path from 'path';\nimport {configConnection} from \"./constants\";\nclass Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _checkRequest(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.statusText);\n    }\n  }\n\n  _setToken() {\n    const token = localStorage.getItem(\"token\");\n    return {\n        \"Authorization\" : `Bearer ${token}`,\n        ...this._headers\n    }\n}\n  getInitialCards() {\n    const url = new URL(path.join('cards'), this._url).href;\n     return fetch(url, {\n       method: \"GET\",\n       headers: this._setToken(),\n     })\n     .then(this._checkRequest);\n   }\n\n   getInfoUserOfServ() {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: \"GET\",\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n\n  setNewUserInfo(data) {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: \"PATCH\",\n      body: JSON.stringify({ name: data.name, about: data.about }),\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n\n  setNewCard(body) {\n    const url = new URL(path.join('cards'), this._url).href;\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(body),\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n  likeCard(cardId, isLiked) {\n    const url = new URL(path.join('cards', cardId, 'likes'), this._url).href;\n    return fetch(url, {\n      method: isLiked ? \"DELETE\" : \"PUT\",\n      headers: this._setToken(),\n    })\n      .then(this._checkRequest);\n  }\n  setAvatar(avatar) {\n    const url = new URL(path.join('users', 'me', 'avatar'), this._url).href;\n    return fetch(url, {\n      method: \"PATCH\",\n      body: JSON.stringify(avatar),\n      headers: this._setToken(),\n    })\n      .then(this._checkRequest)\n\n  }\n  deleteCard(cardId) {\n    const url = new URL(path.join('cards', cardId), this._url).href;\n    return fetch(url, {\n      method: \"DELETE\",\n      headers: this._setToken(),\n    }).then(this._checkRequest);\n  }\n \n}\n\nconst api = new Api(configConnection);\nexport { api };\n\n","const config = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__submit-button',\n  inactiveButtonClass: 'popup__submit-button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n}\nconst configConnection = {\n url: 'http://project-mesto.nomoredomains.xyz/',\n  headers: {\n    'Content-Type': 'application/json',\n  }\n}\nconst authConfigConnection ={\n url: 'http://project-mesto.nomoredomains.xyz/',\n headers: {\n    'Content-Type': 'application/json'\n  }\n}\nconst cardsTemplateSelector = 'place-card';\nconst containerSelector = '.places';\nconst closeButtonSelector = '.popup__reset-button';\nconst openedPopupSelector ='popup_opened';\nconst largeImageSelector= '.popup__large-image';\nconst popupSumtitleSelector ='.popup__subtitle';\nconst inputName = document.querySelector('.popup__input_type_name');\nconst inputGob = document.querySelector('.popup__input_type_specification');\nconst formEditProfile = document.querySelector('.popup__form_profile');\nconst formNewPlace = document.querySelector('.popup__form_place');\nconst formEditAvatar=document.querySelector('.popup_type_change-avatar')\n\nexport { config, configConnection,authConfigConnection, cardsTemplateSelector, containerSelector, largeImageSelector, popupSumtitleSelector,\n  closeButtonSelector, openedPopupSelector, inputName, inputGob, formEditProfile, formNewPlace, formEditAvatar};","import path from 'path';\nimport { authConfigConnection } from \"./constants\";\nclass Auth {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n  _checkRequest(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.statusText);\n    }\n  }\n  register({ password, email }) {\n    const url = new URL(path.join('signup'), this._url).href;\n    return fetch(url, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email })\n    }).then(this._checkRequest);\n  } ;\n\n  authorize({ password, email }) {\n    const url = new URL(path.join('signin'), this._url).href;\n    return fetch(url, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkRequest)\n }\n  getContent(token) {\n    const url = new URL(path.join('users', 'me'), this._url).href;\n    return fetch(url, {\n      method: 'GET',\n      headers: {\n        ...this._headers,\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n    .then(this._checkRequest)\n  }\n}\nconst auth = new Auth(authConfigConnection);\nexport { auth };","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nexport default function EditAvatarPopup(props) {\n  const inputWithSource = React.useRef(); // записываем объект, возвращаемый хуком, в переменную\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: inputWithSource.current.value,\n    });\n  }\n  React.useEffect(() => {\n    inputWithSource.current.value=''\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onClickPopup={props.onClickPopup}\n      onSubmit={handleSubmit}\n      name=\"change-avatar\"\n      title=\"Обновить аватар\"\n      titleOfButton=\"Сохранить\"\n    >\n      <input\n        ref={inputWithSource}  \n        className=\"popup__input popup__input_type_avatar\"\n        name=\"avatar\"\n        type=\"url\"\n        placeholder=\"Введите адрес аватара\"\n        required\n      />\n      <span className=\"popup__error popup__error_visible\" id=\"avatar-error\">\n        Введите адрес сайта\n      </span>\n    </PopupWithForm>)\n}\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nexport default function EditProfilePopup(props) {\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  //подписка на контекст\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    })\n  }\n\n  // После загрузки текущего пользователя из API\n  // его данные будут использованы в управляемых компонентах.\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onClickPopup={props.onClickPopup}\n      onSubmit={handleSubmit}\n      name=\"profile\"\n      title=\"Обновить профиль\"\n      titleOfButton=\"Сохранить\"\n    >\n      <input\n        className=\"popup__input popup__input_type_name\"\n        name=\"name\"\n        type=\"text\"\n        placeholder=\"Ваше имя\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={name || ''}\n        onChange={handleChangeName}\n        required\n      />\n      <span className=\"popup__error\" id=\"name-error\">\n        Вы пропустили это поле\n      </span>\n      <input\n        className=\"popup__input popup__input_type_specification\"\n        name=\"about\"\n        type=\"text\"\n        placeholder=\"Ваша специальность\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={description || ''}\n        onChange={handleChangeDescription}\n        required\n      />\n      <span className=\"popup__error\" id=\"about-error\">\n        Вы пропустили это поле\n      </span>\n    </PopupWithForm>\n  )\n}","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nexport default function AddPlacePopup(props) {\n  const [place, setPlace] = React.useState('');\n  const [source, setSource] = React.useState('');\n  function handleChangePlace(e) {\n    setPlace(e.target.value);\n  }\n  function handleChangeSource(e) {\n    setSource(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace({ name: place, link: source })\n  }\n  React.useEffect(() => {\n    setPlace('');\n    setSource('');\n  }, [props.isOpen]);\n\n  return (<PopupWithForm\n    isOpen={props.isOpen}\n    onClose={props.onClose}\n    onClickPopup={props.onClickPopup}\n    onSubmit={handleSubmit}\n    name=\"place\"\n    title=\"Новое место\"\n    titleOfButton=\"Сохранить\"\n  >\n    <input\n      className=\"popup__input popup__input_type_place\"\n      name=\"place\"\n      type=\"text\"\n      placeholder=\"Название\"\n      minLength=\"2\"\n      maxLength=\"30\"\n      value={place || ''}\n      onChange={handleChangePlace}\n      required\n    />\n    <span className=\"popup__error popup__error_visible\" id=\"place-error\">\n      Вы пропустили это поле\n    </span>\n    <input\n      className=\"popup__input popup__input_type_link\"\n      name=\"link\"\n      type=\"url\"\n      placeholder=\"Ссылка на картинку\"\n      value={source || ''}\n      onChange={handleChangeSource}\n      required\n    />\n    <span className=\"popup__error popup__error_visible\" id=\"link-error\">\n      Введите адрес сайта\n    </span>\n  </PopupWithForm>)\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nexport default function Register(props) {\n  const [password, setPassword] = React.useState('');\n  const [email, setEmail] = React.useState('');\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onRegister(\n      {password, email}\n    )\n  }\n  return (\n    <section\n      className='authorization'\n    >\n      <h2 className=\"authorization__title\">Регистрация</h2>\n      <form\n        id=\"register-form\"\n        className='authorization__form'\n        name='register__form'\n        onSubmit={handleSubmit}\n      >\n        <input\n          className=\"authorization__input\"\n          name=\"register-email\"\n          type=\"email\"\n          placeholder=\"Email\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          value={email}\n          onChange={handleChangeEmail}\n          required\n        />\n        <input\n          className=\"authorization__input\"\n          name=\"register-password\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          value={password}\n          onChange={handleChangePassword}\n          required\n        />\n        <button className=\"authorization__submit-button\" type=\"submit\">\n          Зарегистрироваться\n        </button>\n        <Link className=\"authorization__link\" to=\"/login\">\n          Уже зарегистрированы? Войти\n        </Link>\n      </form>\n    </section>\n  )\n}","import React from \"react\";\nexport default function Login(props) {\n  const [password, setPassword] = React.useState('');\n  const [email, setEmail] = React.useState('');\n\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAuthorization(\n      {password, email }\n    )\n  }\n  return (\n    <section\n      className='authorization'\n    >\n      <h2 className=\"authorization__title\">Вход</h2>\n\n      <form\n        id=\"login-form\"\n        className='authorization__form authorization__form_login'\n        name='register__form'\n        onSubmit={handleSubmit}\n      >\n        <input\n          className=\"authorization__input\"\n          name=\"login-email\"\n          type=\"email\"\n          placeholder=\"Email\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          value={email}\n          onChange={handleChangeEmail}\n          required\n        />\n        <input\n          className=\"authorization__input\"\n          name=\"login-password\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          value={password}\n          onChange={handleChangePassword}\n          required\n        />\n\n        <button className=\"authorization__submit-button\" type=\"submit\">\n          Войти\n        </button>\n\n      </form>\n\n    </section>\n  )\n}","export default __webpack_public_path__ + \"static/media/ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import ok from \"../images/ok.svg\";\nimport error from \"../images/error.svg\";\nexport function InfoToolTip(props){\n  return (\n    <section\n      className={`popup ${props.isOpen ? \"popup_opened\" : \" \"}`}\n      onClick={props.onPopupClick}\n    >\n      <div className=\"popup__content popup__content_infoToolTip\">\n        <img\n          className=\"popup__infoImage\"\n          src={props.isAuthorization ? ok : error}\n          alt={props.isAuthorization ? 'Вы успешно авторизировались' : 'Что-то пошло не так'}\n        />\n        <p className=\"popup__infoText\">{props.isAuthorization ? \"Вы успешно зарегистрировались!\"\n          : \"Что-то пошло не так! Попробуйте ещё раз.\"}\n        </p>\n        <button\n          className=\"popup__reset-button popup__reset-button_type_infoToolTip\"\n          type=\"button\"\n          onClick={props.onClose}\n        ></button>\n      </div>\n    </section>\n  )\n}\n","import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n    props.loggedIn ? <Component {...props} /> : <Navigate to=\"/login\" />\n  );\n};\nexport default ProtectedRoute;\n","import Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport React from \"react\";\nimport { api } from '../utils/Api';\nimport { auth } from \"../utils/Auth\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport {  Route, Routes,  useNavigate, Navigate } from 'react-router-dom';\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport {InfoToolTip} from \"./InfoToolTip\"\nimport ProtectedRoute from \"./ProtectedRoute\";\nfunction App() {\n  //переменные состояния видимости попапов\n  const [isEditProfilePopupOpen, setProfilePopupStatus] = React.useState(false);\n  const [isAddPlacePopupOpen, setEditPopupStatus] = React.useState(false);\n  const [isEditAvatarPopupOpen, setAvatarPopupStatus] = React.useState(false);\n  const [isInfoPopupOpen, setInfoPopupStatus] = React.useState(false);\n  const [isRequestAuthStatus, setRequestAuthStatus] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setUser] = React.useState({ name: '', about: '', avatar: '' });\n  const [loggedIn, setLoggedStatus] = React.useState(false)\n  const [email, setEmail] = React.useState('')\n  const [cards, setCards] = React.useState([]);\n  const navigation = useNavigate();\n\n  React.useEffect(() => {\n    function checkToken() {\n      const token = localStorage.getItem('token');\n      if (token) {\n        auth.getContent(token)\n          .then((res) => {\n            setLoggedStatus(true);\n            setEmail(res.data.email);\n          })\n          .catch(err => {\n            console.log(`Упс. Что-то пошло не так. Ошибка: ${err}`);\n            setLoggedStatus(false);\n          });\n      }\n    }\n    checkToken();\n  }, []);\n  React.useEffect(() => {\n    function getInitialCards() {\n      api\n        .getInitialCards()\n        .then((res) => {\n          setCards(res.data.reverse());\n        })\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\n    }\n    if (loggedIn === true) {getInitialCards();}\n  }, [loggedIn]);\n  \n  React.useEffect(() => {\n    function getInfoUser() {\n      api\n        .getInfoUserOfServ()\n        \n        .then((res) => {\n          setUser(res.data);\n        })\n\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\n    }\n    if (loggedIn === true) { getInfoUser();}\n  }, [loggedIn]);\n\n\n\n  React.useEffect(() => {\n    if (loggedIn === true) {\n      navigation('/')\n    }\n}, [loggedIn, navigation])\n\n  function handleRegisterFormSubmit(data) {\n    auth.register(data)\n        .then((res) => {\n        navigation('/login')\n        setRequestAuthStatus(true)\n      })\n      .catch((err) => {\n        setRequestAuthStatus(false)\n      })\n      .finally(() => {\n        setInfoPopupStatus(true)\n      })\n  }\n\n  function handleOnAuthorization(data) {\n    auth.authorize(data)\n      .then((res) => {\n        \n        localStorage.setItem('token', res.token)\n        setLoggedStatus(true)\n        setEmail(data.email)\n        setRequestAuthStatus(true)\n        navigation('/')\n      })\n      .catch((err) => {\n        setRequestAuthStatus(false)\n        setInfoPopupStatus(true)\n      })\n  }\n  function handleUpdateUser(data) {\n    function setInfoUser() {\n      api\n        .setNewUserInfo(data)\n        .then((res) => {\n          setUser(res.data);\n          closeAllPopups();\n        })\n        .catch((err) => console.log(`Ошибка связи с сервером: ${err}`));\n    }\n    setInfoUser();\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api\n      .setAvatar(avatar)\n      .then((avatar) => {\n        setUser(avatar.data);\n        closeAllPopups()\n      }\n      )\n      .catch((err) => {\n        console.log(`Ошибка связи с сервером: ${err}`);\n      })\n  }\n  function handleAddPlaceSubmit(newCard) {\n    api\n      .setNewCard(newCard)\n      .then((newCard) => {\n        setCards([newCard.data, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(`Ошибка связи с сервером: ${err}`);\n      })\n  }\n\n  //объявляем функции обновления переменных состояния\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function handleEditProfileClick() {\n    setProfilePopupStatus(true);\n  }\n  function handleAddPlaceClick() {\n    setEditPopupStatus(true);\n  }\n  function handleEditAvatarClick() {\n    setAvatarPopupStatus(true);\n  }\n  function closeAllPopups() {\n    setProfilePopupStatus(false);\n    setEditPopupStatus(false);\n    setAvatarPopupStatus(false);\n    setInfoPopupStatus(false);\n    setRequestAuthStatus(false);\n    setSelectedCard(null);\n  }\n\n  function handleClickPopup(evt) {\n    if (evt.target.classList.contains(\"popup_opened\")) {\n      closeAllPopups();\n      setSelectedCard(null);\n    }\n  }\n  React.useEffect(() => {\n    if (\n      isEditProfilePopupOpen ||\n      isAddPlacePopupOpen ||\n      isEditAvatarPopupOpen ||\n      isInfoPopupOpen\n    ) {\n      function handleEsc(evt) {\n        if (evt.key === \"Escape\") {\n          evt.preventDefault();\n          closeAllPopups();\n        }\n      }\n      document.addEventListener(\"keydown\", handleEsc);\n      return () => {\n        document.addEventListener(\"keydown\", handleEsc);\n      };\n    }\n  }, [isEditProfilePopupOpen, isAddPlacePopupOpen, isEditAvatarPopupOpen, isInfoPopupOpen]);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api\n      .likeCard(card._id, isLiked)\n                .then((newCard) => {\n                   setCards(state => {\n             \n                   return state.map(currentCard =>\n                    currentCard._id === card._id ? newCard.data : currentCard\n                  )});\n      })\n      .catch((err) => {\n        console.log(`Ошибка связи с сервером: ${err}`);\n      })\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(setCards(cards.filter(item => !(item._id === card._id))))\n      .catch((err) => {\n        console.log(`Ошибка связи с сервером: ${err}`);\n      })\n  }\n\n  function signOut() {\n    localStorage.removeItem('token');\n    auth.getContent('')\n      .catch((err) => {    //убеждаемся, что сервер нас не может авторизовать\n        setLoggedStatus(false);\n        navigation('/login');\n      })\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Routes>\n          <Route path=\"/\" element={\n            <>\n              <Header loggedIn={loggedIn} email={email} signOut={signOut} linkName='Выйти' to=\"/login\" />\n              <ProtectedRoute\n              loggedIn={loggedIn}\n              component={Main}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n              />\n              <Footer />\n            </>\n          } />\n\n          <Route path=\"/login\" element={\n            <>\n              <Header loggedIn={loggedIn} linkName='Регистрация' to='/register' />\n              <Login onAuthorization={handleOnAuthorization} />\n            </>\n          } />\n\n          <Route path=\"/register\" element={\n            <>\n              <Header loggedIn={loggedIn} linkName='Войти' to='/login' />\n              <Register onRegister={handleRegisterFormSubmit} />\n            </>\n          } />\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\n        </Routes>\n        <InfoToolTip isOpen={isInfoPopupOpen} isAuthorization={isRequestAuthStatus} onPopupClick={handleClickPopup} onClose={closeAllPopups}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          onPopupClick={handleClickPopup}\n        />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onClickPopup={handleClickPopup}\n          onAddPlace={handleAddPlaceSubmit} />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onClickPopup={handleClickPopup}\n          onUpdateUser={handleUpdateUser} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onClickPopup={handleClickPopup}\n          onUpdateAvatar={handleUpdateAvatar} />\n        <PopupWithForm\n          isClose={closeAllPopups}\n          onClickPopup={handleClickPopup}\n          name=\"delete-card\"\n          title=\"Вы уверены?\"\n          titleOfButton=\"Да\"\n        ></PopupWithForm>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n       <BrowserRouter basename='/'>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}